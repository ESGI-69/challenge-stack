<div class="post {{ showComments ? 'show-comment' : '' }}">
  <div class="post__author">
    <img src="{{ post.IdArtist.PicturePath is null ? asset('build/data-files/artist-pictures/placeholder-image.webp') : asset(post.IdArtist.PicturePath) }}" class="post__author__image">
    <a class="post__author__name" href="{{ path('front_app_artist_show', {'slug': post.IdArtist.Slug}) }}">{{ post.IdArtist.Type == 'group' ? post.IdArtist.Pseudo : post.IdArtist.Prenom ~ ' ' ~ post.IdArtist.Nom ~ ' (' ~ post.IdArtist.Pseudo ~ ')' }}</a>
    <span class="post__author__date">{{ post.ValidatedAt|date('d/m/Y') }}</span>
  </div>
  <div class="post__content">
    <div class="post__content__header">
      <span class="post__content__header__title">{{ post.Title }}</span>
      {% if showComments == false %}
        {% include '/Front/components/button.html.twig' with {
          text: 'View Post & Comments',
          link: path('front_app_post_show', {'slug': post.Slug}),
          class: 'post__content__header__link',
          type: 'outline',
          color: 'white',
        } %}
      {% endif %}
    </div>
    <p class="post__content__text">{{ post.TextContent }}</p>
    <div class="post__content__footer">
      <div class="post__content__footer__comment-count">
        {% include '/icons/comment.html.twig' with { class: 'post__content__footer__comment-count__icon' } %}
        {# Count only the validated comment #}
        <span class="post__content__footer__comment-count__text">{{ post.Comments|length - post.Comments|filter(c => c.ValidatedAt is null)|length }}</span>
      </div>
      <div class="post__content__footer__like-count">
        {% include '/Front/components/button.html.twig' with {
          text: isPostLiked ? 'Liked' : 'Like',
          link: '#',
          class: 'post__content__footer__like-count__button',
          type: 'link',
          color: 'white',
        } %}
        <div class="post__content__footer__like-count__stat">
          {% if isPostLiked %}
            {% include '/icons/like.html.twig' with { class: 'post__content__footer__like-count__stat__icon' } %}
          {% else %}
            {% include '/icons/like-outline.html.twig' with { class: 'post__content__footer__like-count__stat__icon' } %}
          {% endif %}
          <span class="post__content__footer__like-count__stat__text">{{ post.Userslike|length }}</span>
        </div>
      </div>
    </div>
  </div>
  {% if showComments %}
    {% if post.Comments|length > 0 %}
      <div class="post__comments">
        {% for comment in post.Comments %}
          {% if comment.ValidatedAt is not null %}
            {% include '/Front/components/comment.html.twig' with { comment } %}
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div class="post__comments">
        <span class="post__comments__no-comments">No comments yet :( Be the first to comment this post</span>
      </div>
    {% endif %}
  {% endif %}
</div>